<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>Monatsansicht</title>
    <link rel="stylesheet" href="css/navbarStyle.css">
    <link rel="stylesheet" href="css/monthlyViewStyle.css">
</head>

<header>
    <div class="navbar">
        <a href="StartPage.html" class="left-icon">
            <img src="pictures/clock.png" alt="clock-icon" class="left-icon" title="Rückkehr zu Startseite"></a>

        <div class="nav-buttons">
            <a href="Monthly-View.html"><button class="nav-button active" onclick="setActive(this)">Monatsansicht</button></a>
            <a href="WeeklyView.html"><button class="nav-button" onclick="setActive(this)">Wochenansicht</button></a> 
            <a href="Daily-View.html"><button class="nav-button " onclick="setActive(this)">Tagesansicht</button></a>          
        </div>

        <div class="right-icons">
            <a href="Termin_erstellen.html" class="right-icons">
                <img src="pictures/appo.png" alt="Termine" class="icon" title="Termine bearbeiten"></a>
            <a href="Erinnerung_bearbeiten.html" class="right-icons">
                <img src="pictures/bell.webp" alt="Erinnerungen" class="icon" title="Erinnerungen bearbeiten"></a>
        </div>
    </div>

    <div>
        <h1>&nbsp;</h1>
    </div>

    <script>
        function setActive(button) {
            document.querySelectorAll('.nav-button').forEach(btn => btn.classList.remove('active'));
            button.classList.add('active');
        }
    </script>
</header>

<body>
    <br><br>
    <article>
        <div id="uhrzeit">
            <h1 id="uhrzeit"></h1>
            <script>
                function updateUhrzeit() {
                    const jetzt = new Date();
                    const stunden = jetzt.getHours().toString().padStart(2, '0');
                    const minuten = jetzt.getMinutes().toString().padStart(2, '0');
                    const sekunden = jetzt.getSeconds().toString().padStart(2, '0');
                    const uhrzeitText = `${stunden}:${minuten}:${sekunden}`;
                    
                    const monate = [
                        "Januar", "Februar", "März", "April", "Mai", "Juni",
                        "Juli", "August", "September", "Oktober", "November", "Dezember"
                    ];
                    const tag = jetzt.getDate().toString().padStart(2, '0');
                    const monat = monate[jetzt.getMonth()];
                    const jahr = jetzt.getFullYear();
                    const datumText = `${tag}. ${monat} ${jahr}`;
                    
                    document.getElementById('uhrzeit').innerHTML = `<span style="font-size: 38px;">${uhrzeitText}</span><br>
                        <span style="font-size: 20px; color: grey;">${datumText}</span>`;
                }
                
                setInterval(updateUhrzeit, 1000);
                updateUhrzeit();
            </script>
        </div>
        <div>
            <table>
                <tr>
                    <th style="text-align: left;">
                        Monat
                        <select id="monthSelect">
                            <option value="0">Januar</option> 
                            <option value="1">Februar</option>
                            <option value="2">März</option>
                            <option value="3">April</option>
                            <option value="4">Mai</option>
                            <option value="5">Juni</option>
                            <option value="6">Juli</option>
                            <option value="7">August</option>
                            <option value="8">September</option>
                            <option value="9">Oktober</option>
                            <option value="10">November</option>
                            <option value="11">Dezember</option>
                        </select>
                    </th>
                    <th style="width: 50px; font-size: medium;">
                        <input type="number" id="yearInput" value="2025" style="width: 60px;">
                    </th>
                </tr>
            </table>
        </div>
        <!-- Tabelle mit ID -->
        <table id="calendarTable">
            <tr>
                <th>KW</th>
                <th>Mo</th>
                <th>Di</th>
                <th>Mi</th>
                <th>Do</th>
                <th>Fr</th>
                <th>Sa</th>
                <th>So</th>
            </tr>
        </table>
    </article>

    <script>
        function generateCalendar(month, year) {
            const table = document.getElementById('calendarTable');
            while (table.rows.length > 1) {
                table.deleteRow(1);
            }

            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const startDay = firstDay.getDay() === 0 ? 6 : firstDay.getDay() - 1; // Montag als ersten Tag
            const totalDays = lastDay.getDate();

            // Tage des Vormonats
            const prevMonthLastDay = new Date(year, month, 0).getDate();
            let prevMonthDays = [];
            for (let i = startDay - 1; i >= 0; i--) {
                prevMonthDays.push(prevMonthLastDay - i);
            }

            // Tage des nächsten Monats
            const nextMonthDays = [];
            const totalCells = 6 * 7; // 6 Wochen * 7 Tage
            const remainingCells = totalCells - (prevMonthDays.length + totalDays);
            for (let i = 1; i <= remainingCells; i++) {
                nextMonthDays.push(i);
            }

            let date = 1;
            let nextMonthDate = 0;
            for (let i = 0; i < 6; i++) {
                const row = table.insertRow();
                const weekNumberCell = row.insertCell();
                weekNumberCell.textContent = getWeekNumber(new Date(year, month, date));
                weekNumberCell.style.backgroundColor = '#cccccc5f';

                for (let j = 0; j < 7; j++) {
                    const cell = row.insertCell();
                    if (i === 0 && j < startDay) {
                        // Tage des Vormonats
                        cell.textContent = prevMonthDays[j];
                        cell.style.color = 'grey'; // Vormonatstage grau darstellen
                    } else if (date > totalDays) {
                        // Tage des nächsten Monats
                        if (nextMonthDate < nextMonthDays.length) {
                            cell.textContent = nextMonthDays[nextMonthDate];
                            cell.style.color = 'grey'; // Nächster Monatstage grau darstellen
                            nextMonthDate++;
                        } else {
                            cell.textContent = '';
                        }
                    } else {
                        // Tage des aktuellen Monats
                        cell.textContent = date;
                        if (j === 5 || j === 6) {
                            cell.style.backgroundColor = '#cccccc5f';
                        }
                        date++;
                    }
                }
            }
        }

        function getWeekNumber(date) {
            const firstDayOfYear = new Date(date.getFullYear(), 0, 1);
            const pastDaysOfYear = (date - firstDayOfYear) / 86400000;
            return Math.ceil((pastDaysOfYear + firstDayOfYear.getDay() + 1) / 7);
        }

        document.getElementById('monthSelect').addEventListener('change', function() {
            const month = parseInt(this.value);
            const year = parseInt(document.getElementById('yearInput').value);
            generateCalendar(month, year);
        });

        document.getElementById('yearInput').addEventListener('change', function() {
            const month = parseInt(document.getElementById('monthSelect').value);
            const year = parseInt(this.value);
            generateCalendar(month, year);
        });

        // Initial generation
        const currentDate = new Date();
        document.getElementById('monthSelect').value = currentDate.getMonth();
        document.getElementById('yearInput').value = currentDate.getFullYear();
        generateCalendar(currentDate.getMonth(), currentDate.getFullYear());
    </script>

<!--6. Box Schließen-->  
</article>    
<br>
<article>
<div class="Termin" >
    <table class="bottom-table">
        <tr>
            <th>Termin</th>
            <th>Datum</th>
            <th>Uhrzeit</th>
            <th>Beschreibung</th>
            <th style = "width: 1%; background-color: gray "></th>
            <th>Erinnerung</th>
            <th>Datum</th>
            <th>Uhrzeit</th>
            <th>Beschreibung</th>
        </tr>
        <tr>
            <td>Termintitel</td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>Termintitel</td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>Termintitel</td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>Termintitel</td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
    </table>
</div>


</article>

</body>
</html>